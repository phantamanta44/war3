package io.github.phantamanta44.war3.render;

import io.github.phantamanta44.war3.config.Config;
import net.minecraft.client.Minecraft;
import net.minecraft.init.Items;
import net.minecraft.util.ResourceLocation;
import net.minecraftforge.client.IItemRenderer;
import net.minecraftforge.client.IItemRenderer.ItemRenderType;
import net.minecraftforge.client.MinecraftForgeClient;
import net.minecraftforge.client.event.RenderHandEvent;
import net.minecraftforge.fml.common.eventhandler.EventPriority;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

public class ItemRenderInterceptor {

	private Minecraft mc;
	
	public ItemRenderInterceptor(Minecraft minecraft) {
		mc = minecraft;
	}
	
	@SubscribeEvent(priority = EventPriority.NORMAL)
	public void onHandRender(RenderHandEvent event) {
		if (!Config.useModels)
			return;
		if (Minecraft.getMinecraft().gameSettings.thirdPersonView == 0 && this.mc.thePlayer.getCurrentEquippedItem() != null && this.mc.thePlayer.getCurrentEquippedItem().getItem() != null) {
			IItemRenderer renderer = MinecraftForgeClient.getItemRenderer(this.mc.thePlayer.getCurrentEquippedItem(), ItemRenderType.EQUIPPED_FIRST_PERSON);
			if (renderer != null) {
				renderer.renderItem(ItemRenderType.EQUIPPED_FIRST_PERSON, this.mc.thePlayer.getCurrentEquippedItem());
				if (event.isCancelable())
					event.setCanceled(true);
			}
		}
	}
	
	public static void registerRenderers() {
    	MinecraftForgeClient.registerItemRenderer(Items.wooden_hoe, new ObjModelItemRenderer(
    			new ResourceLocation("war3", ""),
    			new ResourceLocation("war3", "")));
    	MinecraftForgeClient.registerItemRenderer(Items.stone_hoe, new ObjModelItemRenderer(
    			new ResourceLocation("war3", ""),
    			new ResourceLocation("war3", "")));
    	MinecraftForgeClient.registerItemRenderer(Items.iron_hoe, new ObjModelItemRenderer(
    			new ResourceLocation("war3", ""),
    			new ResourceLocation("war3", "")));
    	MinecraftForgeClient.registerItemRenderer(Items.diamond_hoe, new ObjModelItemRenderer(
    			new ResourceLocation("war3", ""),
    			new ResourceLocation("war3", "")));
    	MinecraftForgeClient.registerItemRenderer(Items.iron_ingot, new ObjModelItemRenderer(
    			new ResourceLocation("war3", ""),
    			new ResourceLocation("war3", "")));
    	MinecraftForgeClient.registerItemRenderer(Items.gold_ingot, new ObjModelItemRenderer(
    			new ResourceLocation("war3", ""),
    			new ResourceLocation("war3", "")));
    }
	
}
